# React Hooks

React hooks for working with annotations.

## useAnnotations

Get all annotations in the store.

```typescript
function useAnnotations(): Annotation[]
```

**Example:**

```tsx
import { useAnnotations } from 'annota';

function AnnotationList() {
  const annotations = useAnnotations();

  return (
    <ul>
      {annotations.map(ann => (
        <li key={ann.id}>{ann.shape.type}</li>
      ))}
    </ul>
  );
}
```

## useAnnotation

Get a specific annotation by ID.

```typescript
function useAnnotation(id: string): Annotation | undefined
```

**Example:**

```tsx
const annotation = useAnnotation('ann-123');
```

## useSelection

Get currently selected annotations.

```typescript
function useSelection(): Annotation[]
```

**Example:**

```tsx
import { useSelection } from 'annota';

function SelectionInfo() {
  const selection = useSelection();

  return <div>Selected: {selection.length}</div>;
}
```

## usePopup

Manage annotation popup state.

```typescript
interface UsePopupOptions {
  autoShow?: boolean; // Default: false
}

interface UsePopupResult {
  annotation: Annotation | null;
  show: (annotationId: string) => void;
  hide: () => void;
  toggle: (annotationId: string) => void;
  updateProperties: (annotationId: string, properties: Record<string, unknown>) => void;
  updateStyle: (annotationId: string, style: Partial<AnnotationStyle>) => void;
  deleteAnnotation: (annotationId: string) => void;
}

function usePopup(options?: UsePopupOptions): UsePopupResult
```

**Example:**

```tsx
import { usePopup, useAnnotationDoubleClick } from 'annota';

function Editor({ viewer }) {
  const popup = usePopup({ autoShow: false });

  useAnnotationDoubleClick(viewer, annotation => {
    popup.show(annotation.id);
  });

  return (
    <AnnotationPopup
      viewer={viewer}
      annotation={popup.annotation}
      onClose={popup.hide}
    >
      <input
        value={popup.annotation?.properties?.label || ''}
        onChange={(e) =>
          popup.updateProperties(popup.annotation!.id, {
            label: e.target.value,
          })
        }
      />
    </AnnotationPopup>
  );
}
```

## useAnnotationDoubleClick

Listen for double-click events on annotations.

```typescript
function useAnnotationDoubleClick(
  viewer: OpenSeadragon.Viewer | undefined,
  onDoubleClick: (annotation: Annotation) => void
): void
```

**Example:**

```tsx
useAnnotationDoubleClick(viewer, annotation => {
  console.log('Double-clicked:', annotation.id);
  popup.show(annotation.id);
});
```

## useLayerManager

Manage annotation layers.

```typescript
interface UseLayerManagerResult {
  layers: Layer[];
  createLayer: (config: LayerConfig) => void;
  updateLayer: (id: string, updates: Partial<Layer>) => void;
  deleteLayer: (id: string, deleteAnnotations?: boolean) => void;
  getLayer: (id: string) => Layer | undefined;
}

function useLayerManager(): UseLayerManagerResult
```

**Example:**

```tsx
import { useLayerManager } from 'annota';

function LayerPanel() {
  const layerManager = useLayerManager();

  const createTumorLayer = () => {
    layerManager.createLayer({
      id: 'tumor',
      name: 'Tumor Regions',
      visible: true,
      style: {
        fill: 'rgba(255, 0, 0, 0.3)',
        stroke: '#ff0000',
      },
    });
  };

  return (
    <div>
      {layerManager.layers.map(layer => (
        <div key={layer.id}>
          <input
            type="checkbox"
            checked={layer.visible}
            onChange={(e) =>
              layerManager.updateLayer(layer.id, {
                visible: e.target.checked,
              })
            }
          />
          {layer.name}
        </div>
      ))}
    </div>
  );
}
```

## useViewer

Get the OpenSeadragon viewer instance.

```typescript
function useViewer(): OpenSeadragon.Viewer | undefined
```

**Example:**

```tsx
const viewer = useViewer();
```

## useAnnotator

Get the Annota annotator instance.

```typescript
function useAnnotator(): AnnotatorInstance | undefined
```

**Example:**

```tsx
const annotator = useAnnotator();

// Access the annotation store directly
const allAnnotations = annotator.state.store.all();
```
